% !TEX root = ../../main.tex

\subsection{Modelo}\label{sec:01-sudoku-modelo}

\subsubsection*{Parámetros}
\begin{description}
  \item[\textbf{P1 — \(N\):}] Tamaño del tablero. En Sudoku clásico, \(N=9\).
  \item[\textbf{P2 — \(S\):}] Índices de filas/columnas: \(S=\{1,\dots,N\}\).
  \item[\textbf{P3 — \(DIG\):}] Dígitos válidos: \(DIG=\{1,\dots,N\}\).
  \item[\textbf{P4 — \(G\):}] Matriz de pistas \(G\in\{0,\dots,N\}^{S\times S}\); \(G_{r,c}=0\) indica vacío y \(G_{r,c}\in DIG\) fija la celda.
\end{description}

\subsubsection*{Variables}
\begin{description}
  \item[\textbf{V1 — \(X_{r,c}\):}] Valor de la celda \((r,c)\): \(X_{r,c}\in DIG\), para \(r,c\in S\).
\end{description}

\subsubsection*{Restricciones principales}
\begin{description}
  \item[\textbf{R1 — Pistas fijas:}] Si hay pista, se respeta: \((G_{r,c}>0)\Rightarrow X_{r,c}=G_{r,c}\) para todo \(r,c\in S\).
  \item[\textbf{R2 — Filas sin repetición:}] \(\forall r\in S:\ \textit{all\_different}\big([X_{r,c}\mid c\in S]\big)\).
  \item[\textbf{R3 — Columnas sin repetición:}] \(\forall c\in S:\ \textit{all\_different}\big([X_{r,c}\mid r\in S]\big)\).
  \item[\textbf{R4 — Cajas \(3\times3\) sin repetición:}] \(\forall b_r,b_c\in\{0,1,2\}:\ \textit{all\_different}\big([X_{3b_r+i,\,3b_c+j}\mid i,j\in\{1,2,3\}]\big)\).
\end{description}

\subsubsection*{Restricciones redundantes}
\begin{description}
  \item[\textbf{R5 — Suma por fila \(=45\):}] \(\forall r\in S:\ \sum_{c\in S}X_{r,c}=45\). Aporta poda lineal cuando faltan pocas celdas en la fila.
  \item[\textbf{R6 — Suma por columna \(=45\):}] \(\forall c\in S:\ \sum_{r\in S}X_{r,c}=45\). Refuerza la propagación vertical.
  \item[\textbf{R7 — Suma por caja \(=45\):}] \(\forall b_r,b_c\in\{0,1,2\}:\ \sum_{i=1}^{3}\sum_{j=1}^{3}X_{3b_r+i,\,3b_c+j}=45\). Útil para cerrar subcuadrículas casi completas.
\end{description}

\subsubsection*{Justificación del modelo}
La formulación reproduce con precisión las reglas del Sudoku y conserva corrección y completitud. Las restricciones R1–R4 cubren los principios esenciales: las pistas fijas (R1) respetan la instancia, las filas y columnas sin repetición (R2–R3) garantizan unicidad de dígitos en ambas direcciones, y las cajas \(3\times3\) (R4) extienden la no repetición a las subcuadrículas. El dominio \(DIG\) acota los valores a \(1\!-\!9\) y una única variable por celda simplifica la coherencia entre todas las vistas del tablero. Las redundancias R5–R7, basadas en la suma total de \(1\!-\!9\), refuerzan la propagación local sin crear soluciones nuevas, por lo que pueden ayudar a detectar inconsistencias con menos exploración.
